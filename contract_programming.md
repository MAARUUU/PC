# **Контрактное программирование** 
**Контрактное программирование** – это метод построения архитектуры программного обеспечения, в соответствии с которым для интерфейсов компонентов системы должны быть разработаны условия определяющие допустимые значения и ожидаемое поведение системы. То есть, мы заранее задаем правила для метода и сигнализируем при их нарушении.

Выделяют три вида условий:  
- Предусловия (Preconditions) – условия корректности входных аргументов метода;
- Постусловия (Postconditions) – условия корректности результата работы метода;
- Инварианты (Invariants) – условия корректности переменных метода на протяжении всего его выполнения.


**Code Contracts** – это библиотека в .NET 4, реализующая идею программирования по контракту.   
Контракты кода определяются классом Contract. Все требования контрактов, которые задаются в методе, независимо от того, являются они предусловиями или постусловиями, должны помещаться в начало метода.  
# Пример
Создадим проект, добавим два класса. Первый из них будем представлять из себя информацию о платеже:
```c#
    /// <summary>
    /// Класс, который содержит информацию о платеже
    /// </summary>
    public class Payment
    {
        /// <summary>
        /// Имя адресата
        /// </summary>
        public string Name { get; set; }
         
        /// <summary>
        /// Дата платежа
        /// </summary>
        public DateTime Date { get; set; }

        /// <summary>
        /// Сумма платежа
        /// </summary>
        public double Amount { get; set; }
    }
```
Второй, пока пустой, операции с ними:
```c#
        /// <summary>
        /// Класс, который содержит операции с платежами
        /// </summary>
        public class PaymentProcessor {}
```
В Code Contracts для задания предусловий используется метод **Contract.Requires()**. Добавим в класс PaymentProcessor метод Add():
```c#
        /// <summary>
        /// Добавление платежа
        /// </summary>
        /// <param name="payment">Экземпляр класса Payment, содержащий информацию о платеже</param>
        /// Полученное значение не должно быть равно null, как и имя адресата
        /// Дата не должна быть из будущего
        /// Cумма платежа должна быть больше нуля
        public void Add(Payment payment)
        {
            Contract.Requires(payment != null);
            Contract.Requires(!string.IsNullOrEmpty(payment.Name));
            Contract.Requires(payment.Date <= DateTime.Now);
            Contract.Requires(payment.Amount > 0);

            this._payments.Add(payment);
        }
```  
Как правило, при работе метода необходимо убедиться, что и полученный от него результат будет соответствовать определенным правилам. Их называют постусловиями. Для их указания в Code Contracts используется метод **Contract.Ensures()**.  
По прежнему в классе PaymentProcessor создадим метод GetPaymentsTotal(), который возвращает сумму всех платежей сделанных от указанного имени name.
```c#
        /// <summary>
        /// Метод возвращает сумму всех платежей сделанных от указанного имени name.
        /// </summary>
        /// <param name="name">Имя человека, который делает запрос</param>
        /// Имя человека не должно быть равно null
        /// <returns>Сумма всех платежей, которые принадлежат одному опр. человеку</returns>
        ///  Результат работы метода всегда должен быть больше нуля
        public double GetPaymentsTotal(string name)
            {
                Contract.Requires(!string.IsNullOrWhiteSpace(name));
    
                Contract.Ensures(Contract.Result<double>() >= 0);

                double total = 0.0;

                     /// проходим весь список
                    foreach (var payment in this._payments)
                        {        
                        /// возращает true, если эл-ты равны
                        /// иначе false
                            if (string.Equals(payment.Name, name))
                                {    
                                    /// считаем сумму 
                                    total += payment.Amount;
                                }
                        }    

                return total;
            }
```

## Схема программы
---
```python
# Даны два действительных числа. Вывести первое число, если оно больше второго, и оба числа, если это не так.

x=input("Введите первое число: ")
y=input("Введите второе число: ")

if x>y:
    print("Результат: %.2f" % x)
else:
    print("Результат: ")
    print(x,y)
```
### Схема :
```
Начало
        ввод(x);
        ввод(y);

если p(x, y) то на L1;

z := m(x,y);
перейти на L2;

L1: z := h(x);
​    перейти на L2;

L2: вывод(z);
Конец

```
# **Заключение**
Данный подход позволяет на порядок повысить качество и надежность кода, в то же время упрощая тестирование и отладку. 